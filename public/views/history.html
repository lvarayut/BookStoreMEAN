{% extends 'layout.html' %}

{% block content %}
<div ng-init="loadHistory()"></div>
<h2>Shopping history</h2>
<hr>
    <table class="table table-hover">
        <thead>
        <tr>
            <th>DATE</th>
            <th>PRODUCT NAME</th>
            <th>QUANTITY</th>
            <th>TOTAL PRICE</th>
            <th>PAYMENT METHOD</th>
        </tr>
        </thead>
        <tbody>
        <tr ng-repeat="item in history track by $index">
            <td>{[ item.createdAt | date: 'd MMMM, yyyy' ]}</td>
            <td>
                <div class="col-md-4">
                    <img class="img-responsive" width="75" height="115" ng-src="/api/getImage/{[ item.product._id]}">
                </div>
                <div class="col-md-8">
                    <strong>{[ item.product.name ]}</strong>
                    <div>{[ item.product.author ]}</div>
                    <div>{[ item.product.company ]}</div>
                    <div>Price: <i class="fa fa-euro"></i>{[ item.product.price | number : 2 ]}</div>
                </div>
                <div class="clearfix"></div>
                <hr ng-if="!$last">
            </td>
            <td>{[ item.quantity ]}</td>
            <td><i class="fa fa-euro"></i>{[ item.total | number : 2 ]}</td>
            <td>{[ item.paymentMethod ]}</td>
        </tr>
        </tbody>
    </table>
</div>
{% endblock %}

